<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙˆÙØ¬Ù’Ù‡ÙØ© | ØªÙ†Ù‚Ù„ Ø¨Ø«Ù‚Ø©.. Ø§Ø³ØªØ«Ù…Ø± Ø¨Ø£Ù…Ø§Ù†</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
    
    <style>
        /* === Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ù‡ÙˆÙŠØ© === */
        :root {
            --brand-dark-teal: #0f2925;
            --brand-gold: #c5a065;
            --brand-dark-bg: #1a1a1a;
            --light-bg: #f8f9fa;
        }

        /* === Ø¥ØµÙ„Ø§Ø­ Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª (Stats Bar) === */
        .live-stats-bar {
            background-color: #111 !important; /* Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ† Ø¥Ø¬Ø¨Ø§Ø±ÙŠ */
            color: white;
            padding: 15px 0;
            overflow: hidden;
            white-space: nowrap;
            border-bottom: 3px solid var(--brand-gold);
            position: relative;
            z-index: 5; /* Ù„Ø¶Ù…Ø§Ù† Ø¸Ù‡ÙˆØ±Ù‡ ÙÙˆÙ‚ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø®Ø±Ù‰ */
        }
        .stats-ticker {
            display: inline-block;
            animation: ticker 30s linear infinite;
        }
        .stat-item {
            display: inline-block;
            margin: 0 40px;
            font-size: 1.1rem;
            font-weight: bold;
        }
        .stat-item i { color: var(--brand-gold); margin-left: 8px; }
        @keyframes ticker {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* === ÙˆØ¯Ø¬Øª Ø§Ù„Ø¨Ø­Ø« "ÙˆÙŠÙ† ÙˆØ¬Ù‡ØªÙƒØŸ" === */
        .search-widget-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 25px; border-radius: 20px;
            margin-top: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-width: 800px; margin-left: auto; margin-right: auto;
            position: relative; z-index: 10;
        }
        .search-form { display: flex; gap: 15px; flex-wrap: wrap; }
        .search-input-group { flex: 1; min-width: 200px; position: relative; }
        .search-input-group i { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: var(--brand-gold); }
        .search-input-group select, .search-input-group input {
            width: 100%; padding: 15px 45px 15px 15px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 12px; background: rgba(0,0,0,0.3);
            color: white; font-family: 'Tajawal', sans-serif; appearance: none;
        }
        .search-input-group select option { background: #333; color: white; }
        .search-btn {
            background: var(--brand-gold); color: white; border: none;
            padding: 0 40px; border-radius: 12px; font-weight: bold; cursor: pointer; transition: 0.3s;
        }
        .search-btn:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(197, 160, 101, 0.4); }

        /* === ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© (Ù…Ù† GitHub) === */
        .map-section-wrapper {
            background: #fff;
            padding: 80px 0;
            position: relative;
        }
        .centered-map-layout { max-width: 1000px; margin: 0 auto; position: relative; }
        .top-filter-bar {
            background: #ffffff; border: 1px solid #e0e0e0; border-radius: 16px;
            padding: 12px 15px; margin-bottom: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.03); display: flex;
            align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 10px;
        }
        .tf-item { display: flex; flex-direction: column; gap: 4px; min-width: 130px; flex: 1; }
        .tf-label { font-size: 0.8rem; font-weight: bold; color: #666; display: flex; align-items: center; gap: 5px; }
        .tf-pills { display: flex; gap: 4px; background: #f5f5f5; padding: 3px; border-radius: 50px; width: fit-content; }
        .tf-pill { padding: 5px 10px; border-radius: 50px; font-size: 0.75rem; cursor: pointer; transition: 0.3s; color: #555; white-space: nowrap; }
        .tf-pill.active { background: var(--brand-dark-teal); color: white; font-weight: bold; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .tf-select { padding: 6px; border-radius: 8px; border: 1px solid #ddd; background: #fff; font-family: 'Tajawal'; cursor: pointer; width: 100%; font-size: 0.9rem; }
        .tf-btn { background: var(--brand-dark-teal); color: white; border: none; padding: 0 15px; border-radius: 8px; cursor: pointer; font-weight: bold; height: 38px; display: flex; align-items: center; justify-content: center; gap: 5px; margin-top: auto; font-size: 0.9rem; white-space: nowrap; }
        
        .new-map-container {
            position: relative; height: 500px; width: 100%;
            border-radius: 20px; overflow: hidden; border: 4px solid #fff;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1); z-index: 1;
        }
        #mapid { height: 100%; width: 100%; }
        
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ø§Ø±ÙƒØ± ÙˆØ§Ù„Ø¨ÙˆØ¨ Ø§Ø¨ Ù„Ù„Ø®Ø±ÙŠØ·Ø© */
        .price-marker-box {
            background: white; border-radius: 30px; padding: 4px 10px;
            font-weight: bold; font-family: 'Tajawal'; font-size: 0.8rem;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2); border: 2px solid white;
            display: flex; align-items: center; gap: 4px; color: #333; transition: transform 0.2s;
        }
        .price-marker-box:hover { transform: scale(1.1); z-index: 1000; }
        .price-marker-box.premium { background: #2c3e50; color: #f1c40f; border-color: #f1c40f; }
        
        .popup-car-card { padding: 5px; text-align: right; width: 200px; }
        .popup-img { width: 100%; height: 100px; object-fit: cover; border-radius: 8px; margin-bottom: 8px; }
        .rating-bars-container { margin: 8px 0; font-size: 0.75rem; }
        .rating-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 3px; }
        .progress-track { flex-grow: 1; height: 4px; background: #eee; margin: 0 5px; border-radius: 2px; }
        .progress-fill { height: 100%; background: #2ecc71; border-radius: 2px; }

        /* === Ø§Ù„Ù…ÙŠØ«Ø§Ù‚ Ø§Ù„Ø£Ù…Ù†ÙŠ === */
        .security-quote-section {
            background: var(--light-bg); padding: 60px 0; text-align: center;
            border-top: 1px solid #eee; border-bottom: 1px solid #eee;
        }
        .security-quote-box {
            background: linear-gradient(135deg, var(--brand-dark-teal) 0%, var(--brand-dark-bg) 100%);
            max-width: 900px; margin: 0 auto; position: relative; padding: 50px;
            border-radius: 20px; box-shadow: 0 20px 50px rgba(15, 41, 37, 0.25);
            border-right: 6px solid var(--brand-gold); color: white;
        }
        .quote-icon { font-size: 4rem; color: rgba(255,255,255,0.05); position: absolute; top: 20px; right: 20px; }
        .security-title { color: var(--brand-gold); margin-bottom: 25px; font-weight: 800; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }

        /* === Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª === */
        .security-flow-section { background: #fff; padding: 60px 0; text-align: center; }
        .security-flow-container { display: flex; justify-content: center; align-items: center; gap: 30px; flex-wrap: wrap; margin-top: 40px; }
        .flow-step {
            flex: 1; max-width: 250px; background: white; padding: 30px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); border: 1px solid #eee; transition: 0.3s;
        }
        .flow-step:hover { transform: translateY(-10px); border-color: var(--brand-gold); }
        .flow-icon {
            font-size: 2.5rem; color: var(--brand-dark-teal); margin-bottom: 20px;
            height: 80px; width: 80px; background: #f8f9fa; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;
        }
        .flow-arrow { font-size: 2rem; color: #ddd; animation: slideArrow 2s infinite; }
        @keyframes slideArrow { 0%,100% {transform: translateX(0);} 50% {transform: translateX(-10px);} }

        .cars-showcase-section {
            background: #111; color: white; padding: 80px 0;
            background-image: radial-gradient(circle at 50% 50%, #222 0%, #000 100%);
        }
        .car-game-card {
            background: rgba(255,255,255,0.05); border: 1px solid #333;
            border-radius: 20px; padding: 20px; transition: 0.4s; position: relative; overflow: hidden;
        }
        .car-game-card:hover { border-color: var(--brand-gold); background: rgba(255,255,255,0.1); box-shadow: 0 0 30px rgba(197, 160, 101, 0.2); }
        .car-game-img { width: 100%; height: 200px; object-fit: contain; transition: 0.4s; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5)); }
        .car-game-card:hover .car-game-img { transform: scale(1.1) rotate(-2deg); }
        .car-stats { margin-top: 20px; }
        .stat-row { display: flex; align-items: center; margin-bottom: 8px; font-size: 0.85rem; }
        .stat-label { width: 70px; color: #aaa; }
        .stat-bar-bg { flex: 1; height: 6px; background: #333; border-radius: 3px; overflow: hidden; }
        .stat-bar-fill { height: 100%; border-radius: 3px; width: 0; transition: width 1s ease-out; }

        .timeline-section { padding: 80px 0; background: #fdfdfd; }
        .timeline-container { position: relative; max-width: 800px; margin: 0 auto; padding-left: 40px; border-right: 3px solid #eee; }
        .timeline-item { position: relative; margin-bottom: 60px; opacity: 0.3; transition: 0.5s; padding-right: 40px; }
        .timeline-item.active { opacity: 1; }
        .timeline-dot {
            position: absolute; right: -56px; top: 0; width: 30px; height: 30px; background: white;
            border: 4px solid #ddd; border-radius: 50%; transition: 0.5s; z-index: 2;
        }
        .timeline-item.active .timeline-dot { border-color: var(--brand-gold); background: var(--brand-gold); box-shadow: 0 0 20px var(--brand-gold); }

        .roi-section { background: linear-gradient(135deg, var(--brand-dark-teal) 0%, #000 100%); color: white; padding: 80px 0; text-align: center; }
        .roi-container { background: rgba(255,255,255,0.05); padding: 40px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); max-width: 700px; margin: 0 auto; }
        input[type=range] { width: 100%; height: 8px; background: #444; border-radius: 5px; outline: none; -webkit-appearance: none; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 25px; height: 25px; background: var(--brand-gold); border-radius: 50%; cursor: pointer; box-shadow: 0 0 15px rgba(197, 160, 101, 0.5); }
        .roi-result { font-size: 2.5rem; color: var(--brand-gold); font-weight: bold; margin-top: 20px; }

        .partners-section { padding: 40px 0; background: var(--light-bg); overflow: hidden; }
        .partners-scroller { width: 100%; overflow: hidden; mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent); -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent); }
        .partners-track { display: flex; align-items: center; gap: 50px; width: max-content; animation: scroll-ticker 35s linear infinite; }
        @keyframes scroll-ticker { 0% { transform: translateX(0); } 100% { transform: translateX(calc(-50% - 25px)); } }
        .partner-img { height: 60px; width: auto; filter: grayscale(100%) opacity(0.6); transition: 0.3s; }
        .partner-img:hover { filter: grayscale(0%) opacity(1); transform: scale(1.1); }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="logo">
                    <div class="logo-icon">Ùˆ</div>
                    <div class="logo-text">ÙˆÙØ¬Ù’Ù‡ÙØ©</div>
                </a>
                <ul class="nav-links desktop-nav-links">
                    <li><a href="index.html" class="active">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                    <li><a href="cars.html">Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</a></li>
                    <li><a href="index.html#timeline">Ø±Ø­Ù„Ø© Ø§Ù„Ø£Ù…Ø§Ù†</a></li>
                    <li><a href="dashboard-owner.html" class="auth-link" id="nav-owner-dashboard">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¤Ø¬Ø±</a></li>
                    <li><a href="dashboard-renter.html" class="auth-link" id="nav-renter-dashboard">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±</a></li>
                    <li><a href="add-car.html" class="auth-link" id="nav-add-car">Ø£Ø¶Ù Ø³ÙŠØ§Ø±ØªÙƒ</a></li>
                    <li><a href="quiz.html">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø³ÙŠØ§Ø±Ø©</a></li>
                    <li><a href="qassim-map.html">Ø®Ø±Ø§Ø¦Ø· Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</a></li>
                </ul>
                <div class="nav-buttons nav-buttons-desktop-only">
                    <button id="theme-toggle-desktop" class="theme-toggle"><i class="fas fa-moon"></i></button>
                    <a href="landing.html" class="btn btn-primary guest-only" id="nav-guest-button">Ø¯Ø®ÙˆÙ„ Ø¢Ù…Ù† (Ù†ÙØ§Ø°)</a>
                    <div id="nav-user-profile-placeholder"></div>
                </div>
            </nav>
        </div>
    </header>
    
    <section class="hero">
        <div id="particles-js"></div>
        <div class="container">
            <div class="hero-content" data-aos="fade-up" data-aos-duration="1000">
                <h1>ÙˆÙØ¬Ù’Ù‡ÙØ© | ØªÙ†Ù‚Ù„ Ø¨Ø«Ù‚Ø©.. Ø§Ø³ØªØ«Ù…Ø± Ø¨Ø£Ù…Ø§Ù†</h1>
                <p>Ø£ÙˆÙ„ Ù…Ù†ØµØ© ØªØ¯Ù…Ø¬ Ù…Ø±ÙˆÙ†Ø© Ø§Ù„ØªÙ†Ù‚Ù„ Ù…Ø¹ ØµØ±Ø§Ù…Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠ. Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ø³Ø¯ Ø§Ù„Ø¹Ø¬Ø² ÙÙŠ ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„Ù†Ù‚Ù„.</p>
                
                <div class="search-widget-container">
                    <form class="search-form" onsubmit="event.preventDefault(); window.location.href='cars.html';">
                        <div class="search-input-group">
                            <label style="display:block; color:#ccc; margin-bottom:5px; font-size:0.9rem;">ÙˆØ´ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©ØŸ</label>
                            <i class="fas fa-map-marker-alt"></i>
                            <select id="destination-select">
                                <option value="">Ø§Ø®ØªØ± ÙˆØ¬Ù‡ØªÙƒ...</option>
                                <option value="work">ğŸš— Ù…Ø´ÙˆØ§Ø± Ø¹Ù…Ù„ / Ø¯ÙˆØ§Ù…</option>
                                <option value="entertainment">ğŸ¡ Ø§Ù„Ø¨ÙˆÙ„ÙŠÙØ§Ø±Ø¯ / ØªØ±ÙÙŠÙ‡</option>
                                <option value="airport">âœˆï¸ Ø§Ù„Ù…Ø·Ø§Ø± / Ø³ÙØ±</option>
                                <option value="kashta">â›º ÙƒØ´ØªØ© / Ø¨Ø± (4x4)</option> 
                            </select>
                        </div>
                        <div class="search-input-group">
                            <label style="display:block; color:#ccc; margin-bottom:5px; font-size:0.9rem;">Ù…ØªÙ‰ØŸ</label>
                            <i class="fas fa-calendar-alt"></i>
                            <input type="date">
                        </div>
                        <button type="submit" class="search-btn">Ø§Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</button>
                    </form>
                </div>
                
                <div class="hero-buttons" style="margin-top: 30px;">
                    <a href="add-car.html" class="btn btn-primary"><i class="fas fa-key"></i> Ø´Ø§Ø±Ùƒ Ø³ÙŠØ§Ø±ØªÙƒ</a>
                    <a href="cars.html" class="btn btn-secondary"><i class="fas fa-search"></i> Ø§Ø­Ø¬Ø² Ø±Ø­Ù„ØªÙƒ</a>
                </div>
            </div>
        </div>
    </section>

    <div class="live-stats-bar">
        <div class="container">
            <div class="stats-ticker">
                <span class="stat-item"><i class="fas fa-check-circle"></i> Ø¹Ù…Ù„ÙŠØ§Øª Ù…ÙˆØ«Ù‚Ø© Ø¹Ø¨Ø± Ù†ÙØ§Ø° 100%</span>
                <span class="stat-item"><i class="fas fa-car"></i> ØªØºØ·ÙŠØ© Ø´Ø§Ù…Ù„Ø© Ù„Ø¬Ù…ÙŠØ¹ Ù…Ø¯Ù† Ø§Ù„Ù…Ù…Ù„ÙƒØ©</span>
                <span class="stat-item"><i class="fas fa-link"></i> ØªÙƒØ§Ù…Ù„ Ø±Ù‚Ù…ÙŠ Ø´Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠØ©</span> 
                <span class="stat-item"><i class="fas fa-users"></i> Ù…Ø¬ØªÙ…Ø¹ Ù…ÙˆØ«ÙˆÙ‚ Ù„Ù„Ù…ÙˆØ§Ø·Ù† ÙˆØ§Ù„Ù…Ù‚ÙŠÙ… ÙˆØ§Ù„Ø²Ø§Ø¦Ø±</span>
            </div>
        </div>
    </div>

    <section class="security-flow-section">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>Ø¯ÙˆØ±Ø© Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©</h2>
                <p>Ø±Ø­Ù„ØªÙƒ Ù…Ø­Ù…ÙŠØ© Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù„Ù„Ù†Ù‡Ø§ÙŠØ© Ø¹Ø¨Ø± Ø´Ø±ÙƒØ§Ø¡ Ø§Ù„Ù†Ø¬Ø§Ø­</p>
            </div>
            <div class="security-flow-container">
                <div class="flow-step" data-aos="fade-up" data-aos-delay="100">
                    <div class="flow-icon"><i class="fas fa-fingerprint"></i></div>
                    <h3>1. Ø§Ù„ØªØ­Ù‚Ù‚</h3>
                    <p>Ø±Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù…Ø¹ <strong>Ù†ÙØ§Ø°</strong> Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ©.</p>
                </div>
                <div class="flow-arrow"><i class="fas fa-chevron-left"></i></div>
                <div class="flow-step" data-aos="fade-up" data-aos-delay="200">
                    <div class="flow-icon"><i class="fas fa-shield-alt"></i></div>
                    <h3>2. Ø§Ù„ØªØºØ·ÙŠØ©</h3>
                    <p>ØªØ£Ù…ÙŠÙ† Ø´Ø§Ù…Ù„ Ù„Ù„Ø±Ø­Ù„Ø© Ù…Ø±Ø¨ÙˆØ· Ø¨Ù€ <strong>Ù†Ø¬Ù…</strong>.</p>
                </div>
                <div class="flow-arrow"><i class="fas fa-chevron-left"></i></div>
                <div class="flow-step" data-aos="fade-up" data-aos-delay="300">
                    <div class="flow-icon"><i class="fas fa-file-contract"></i></div>
                    <h3>3. Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ø§Ù„ÙŠ</h3>
                    <p>Ø¹Ù‚Ø¯ Ù…ÙˆØ­Ø¯ ÙˆØ¶Ù…Ø§Ù† Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ø¹Ø¨Ø± Ù…Ù†ØµØ© <strong>ÙˆÙØ¬Ù’Ù‡ÙØ©</strong>.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="map-section-wrapper">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>ØªØºØ·ÙŠØ© Ø­ÙŠØ© Ù„Ø£Ø³Ø·ÙˆÙ„Ù†Ø§</h2>
                <p>ØªØµÙØ­ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø­ÙˆÙ„Ùƒ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ</p>
            </div>
            
            <div class="centered-map-layout">
                <div class="top-filter-bar" data-aos="fade-up">
                    <div class="tf-item">
                        <span class="tf-label"><i class="fas fa-map-marker-alt"></i> Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</span>
                        <select id="city-selector" class="tf-select" onchange="changeCity()">
                            <option value="riyadh" selected>Ø§Ù„Ø±ÙŠØ§Ø¶ (ÙˆØ§Ø¬Ù‡Ø© Ø±ÙˆØ´Ù†)</option>
                            <option value="dammam">Ø§Ù„Ø¯Ù…Ø§Ù…</option>
                            <option value="khobar">Ø§Ù„Ø®Ø¨Ø±</option>
                            <option value="jeddah">Ø¬Ø¯Ø©</option>
                        </select>
                    </div>
                    <div class="tf-item">
                        <span class="tf-label"><i class="fas fa-car"></i> Ø§Ù„ÙØ¦Ø©</span>
                        <div class="tf-pills">
                            <div class="tf-pill active" onclick="filterMap('Ø§Ù„ÙƒÙ„', this)">Ø§Ù„ÙƒÙ„</div>
                            <div class="tf-pill" onclick="filterMap('Ø³ÙŠØ¯Ø§Ù†', this)">Ø³ÙŠØ¯Ø§Ù†</div>
                            <div class="tf-pill" onclick="filterMap('Ø¯ÙØ¹ Ø±Ø¨Ø§Ø¹ÙŠ', this)">Ø¹Ø§Ø¦Ù„ÙŠ</div>
                            <div class="tf-pill" onclick="filterMap('ÙØ§Ø®Ø±Ø©', this)">ÙØ§Ø®Ø±Ø©</div>
                        </div>
                    </div>
                    <div class="tf-item">
                        <span class="tf-label"><i class="fas fa-tag"></i> Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: <span id="priceValue" style="color:var(--brand-dark-teal);">1000</span> Ø±ÙŠØ§Ù„</span>
                        <input type="range" min="50" max="1000" value="1000" style="width:100%; accent-color:var(--brand-dark-teal);" oninput="updatePriceLabel(this.value); renderCars()">
                    </div>
                    <button class="tf-btn" onclick="simulateSmartLocate()" id="smart-locate-btn"><i class="fas fa-crosshairs"></i> Ø§Ù„Ø£Ù‚Ø±Ø¨ Ù„ÙŠ</button>
                </div>

                <div class="new-map-container" data-aos="zoom-in">
                    <div id="mapid"></div>
                </div>
            </div>
        </div>
    </section>

    <section class="timeline-section" id="timeline">
        <div class="container">
            <div class="section-title">
                <h2>ÙƒÙŠÙ ØªØ¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒØŸ</h2>
                <p>3 Ø®Ø·ÙˆØ§Øª Ø¨Ø³ÙŠØ·Ø© ØªÙØµÙ„Ùƒ Ø¹Ù† ÙˆØ¬Ù‡ØªÙƒ</p>
            </div>
            <div class="timeline-container">
                <div class="timeline-item active">
                    <div class="timeline-dot"></div>
                    <h3>1. Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø¨Ù†ÙØ§Ø°</h3>
                    <p>Ø£Ù…Ø§Ù† Ù„Ùƒ ÙˆÙ„Ù„Ù…Ø¤Ø¬Ø±ØŒ ÙˆØªÙˆØ«ÙŠÙ‚ ÙÙˆØ±ÙŠ Ù„Ù„Ø¹Ù‚Ø¯.</p>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <h3>2. Ø§Ø®ØªØ± Ø³ÙŠØ§Ø±ØªÙƒ</h3>
                    <p>Ù…Ù† Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø¥Ù„Ù‰ Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„ÙƒØ´ØªØ§Øª.</p>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <h3>3. Ø§ÙØªØ­ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¨Ø¬ÙˆØ§Ù„Ùƒ</h3>
                    <p>Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø±Ù‚Ù…ÙŠ ÙŠØºÙ†ÙŠÙƒ Ø¹Ù† Ù…Ù‚Ø§Ø¨Ù„Ø© Ø§Ù„Ù…Ø¤Ø¬Ø±. Ø´ØºÙ„ ÙˆØ§Ù…Ø´!</p>
                </div>
            </div>
        </div>
    </section>

    <section class="roi-section">
        <div class="container">
            <h2 style="margin-bottom: 10px;">Ø³ÙŠØ§Ø±ØªÙƒ ÙˆØ§Ù‚ÙØ©ØŸ Ø®Ù„Ù‡Ø§ ØªØµØ±Ù Ø¹Ù„ÙŠÙƒ!</h2>
            <p style="color: #aaa; margin-bottom: 40px;">Ø§Ø­Ø³Ø¨ Ø¯Ø®Ù„Ùƒ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ø¥Ø°Ø§ Ø£Ø¬Ø±Øª Ø³ÙŠØ§Ø±ØªÙƒ Ù…Ø¹Ù†Ø§</p>
            <div class="roi-container">
                <div class="slider-container">
                    <label style="display: flex; justify-content: space-between;">
                        <span>Ø£ÙŠØ§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ± ÙÙŠ Ø§Ù„Ø´Ù‡Ø±:</span>
                        <span id="days-val" style="color: var(--brand-gold);">15 ÙŠÙˆÙ…</span>
                    </label>
                    <input type="range" min="1" max="30" value="15" id="days-slider">
                </div>
                <div class="slider-container">
                    <label style="display: flex; justify-content: space-between;">
                        <span>ÙØ¦Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø©:</span>
                        <span id="car-type-val" style="color: var(--brand-gold);">Ø³ÙŠØ¯Ø§Ù† Ù…ØªÙˆØ³Ø·Ø©</span>
                    </label>
                    <input type="range" min="1" max="3" value="1" id="type-slider">
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: #777; margin-top: 5px;">
                        <span>Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©</span><span>ÙØ§Ø±Ù‡Ø©/SUV</span>
                    </div>
                </div>
                <hr style="border-color: rgba(255,255,255,0.1); margin: 30px 0;">
                <p>Ø¯Ø®Ù„Ùƒ Ø§Ù„Ø´Ù‡Ø±ÙŠ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹:</p>
                <div class="roi-result"><span id="total-income">2,250</span> Ø±.Ø³</div>
                <br>
                <a href="add-car.html" class="btn btn-primary" style="background: var(--brand-gold); border-color: var(--brand-gold);">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ø¢Ù†</a>
            </div>
        </div>
    </section>

    <section class="security-quote-section">
        <div class="container">
            <div class="security-quote-box" data-aos="zoom-in">
                <i class="fas fa-quote-right quote-icon"></i>
                <h3 class="security-title">Ù…ÙŠØ«Ø§Ù‚ ÙˆÙØ¬Ù’Ù‡ÙØ© Ø§Ù„Ø£Ù…Ù†ÙŠ</h3>
                <p style="font-size: 1.4rem; line-height: 1.8; color: white; font-weight: 500;">
                    "Ø³ÙˆØ§Ø¡ ÙƒÙ†Øª ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø£Ùˆ Ù‚Ø§Ø¦Ø¯Ù‡Ø§ØŒ <strong>Ù†ÙØ§Ø°</strong> Ù‡Ùˆ Ø§Ù„Ø­ÙƒÙ…ØŒ Ùˆ <strong>Ø£Ø¨Ø´Ø±</strong> Ù‡Ùˆ Ø§Ù„Ø¶Ø§Ù…Ù†.<br>
                    ÙÙŠ ÙˆÙØ¬Ù’Ù‡ÙØ©ØŒ Ù„Ø§ Ù†ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¬Ù‡ÙˆÙ„ÙŠÙ†. ÙƒÙ„ Ø¹Ù…Ù„ÙŠØ© Ù…ÙˆØ«Ù‚Ø©ØŒ ÙƒÙ„ Ø·Ø±Ù Ù…Ø¹Ø±ÙˆÙØŒ ÙˆÙƒÙ„ Ø­Ù‚ Ù…Ø­ÙÙˆØ¸."
                </p>
            </div>
        </div>
    </section>

    <section class="cars-showcase-section">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2 style="color: white;">Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø¶Ø§Ù Ù„Ù„Ø£Ø³Ø·ÙˆÙ„</h2>
                <p style="color: #aaa;">Ø£Ø³Ø·ÙˆÙ„ Ù…ØªÙ†ÙˆØ¹ ÙŠÙ†Ø§Ø³Ø¨ ÙƒÙ„ Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³ ÙˆØ§Ù„Ø£Ø°ÙˆØ§Ù‚</p>
            </div>
            <div class="features-grid"> 
                <div class="car-game-card" data-aos="zoom-in">
                    <div style="background: #e74c3c; color: white; display: inline-block; padding: 2px 10px; border-radius: 4px; font-size: 0.8rem; margin-bottom: 10px;">Ø§Ù„Ø§ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹</div>
                    <img src="https://pngimg.com/d/hyundai_PNG11226.png" class="car-game-img" alt="Car">
                    <h3 style="margin-top: 15px;">Ù‡ÙˆÙ†Ø¯Ø§ÙŠ Ø§Ù„Ù†ØªØ±Ø§ 2024</h3>
                    <div class="car-stats">
                        <div class="stat-row"><span class="stat-label">ØªÙˆÙÙŠØ±</span><div class="stat-bar-bg"><div class="stat-bar-fill" style="width: 95%; background: #2ecc71;"></div></div></div>
                        <div class="stat-row"><span class="stat-label">Ø±Ø§Ø­Ø©</span><div class="stat-bar-bg"><div class="stat-bar-fill" style="width: 70%; background: #f1c40f;"></div></div></div>
                    </div>
                </div>
                <div class="car-game-card" data-aos="zoom-in" data-aos-delay="100">
                    <div style="background: #d35400; color: white; display: inline-block; padding: 2px 10px; border-radius: 4px; font-size: 0.8rem; margin-bottom: 10px;">Ù„Ù„ÙƒØ´ØªØ§Øª</div>
                    <img src="https://freepngimg.com/thumb/toyota/3-2-toyota-transparent.png" class="car-game-img" alt="Land Cruiser">
                    <h3 style="margin-top: 15px;">Ù„Ø§Ù†Ø¯ÙƒØ±ÙˆØ²Ø± GXR</h3>
                    <div class="car-stats">
                        <div class="stat-row"><span class="stat-label">Ù‚ÙˆØ©</span><div class="stat-bar-bg"><div class="stat-bar-fill" style="width: 100%; background: #e74c3c;"></div></div></div>
                        <div class="stat-row"><span class="stat-label">Ø£Ù…Ø§Ù†</span><div class="stat-bar-bg"><div class="stat-bar-fill" style="width: 90%; background: #3498db;"></div></div></div>
                    </div>
                </div>
                <div class="car-game-card" data-aos="zoom-in" data-aos-delay="200">
                    <div style="background: #8e44ad; color: white; display: inline-block; padding: 2px 10px; border-radius: 4px; font-size: 0.8rem; margin-bottom: 10px;">ÙØ®Ø§Ù…Ø©</div>
                    <img src="https://purepng.com/public/uploads/large/purepng.com-bmw-x6-blue-carcarbmwvehicletransport-961524663045h0h05.png" class="car-game-img" alt="BMW">
                    <h3 style="margin-top: 15px;">BMW X6</h3>
                    <div class="car-stats">
                        <div class="stat-row"><span class="stat-label">ÙØ®Ø§Ù…Ø©</span><div class="stat-bar-bg"><div class="stat-bar-fill" style="width: 100%; background: #9b59b6;"></div></div></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="partners-section">
        <div class="container">
            <h3 class="partners-heading" data-aos="fade-up">Ù…Ù†Ø¸ÙˆÙ…Ø© ØªÙƒØ§Ù…Ù„ÙŠØ© Ù…Ø¹</h3>
            <div class="partners-scroller" data-aos="fade-up" data-aos-delay="100">
                <div class="partners-track">
                    <img src="https://www.zarkachat.com/wp-content/uploads/2020/04/absherr.jpg" alt="Ø£Ø¨Ø´Ø±" class="partner-img">
                    <img src="https://kss.sa/wp-content/uploads/2022/05/kss-sa-241-450x176.png?v=1652731492" alt="Ù†ÙØ§Ø°" class="partner-img">
                    <img src="https://is1-ssl.mzstatic.com/image/thumb/Purple221/v4/bb/4a/93/bb4a9376-f7fc-8a7a-73f6-8835ee3d8668/AppIcon-0-0-1x_U007emarketing-0-7-0-0-sRGB-0-85-220.png/1200x630wa.png" alt="Ù†Ø¬Ù…" class="partner-img" style="border-radius: 10px;">
                    <img src="https://khdmatsaudi.com/wp-content/uploads/2021/03/%D8%A8%D9%88%D8%A7%D8%A8%D8%A9-%D8%AA%D9%85-%D9%88%D8%B2%D8%A7%D8%B1%D8%A9-%D8%A7%D9%84%D8%AF%D8%A7%D8%AE%D9%84%D9%8A%D8%A9-1442-%D8%AA%D8%B3%D8%AC%D9%8A%D9%84-%D8%A7%D9%84%D8%AF%D8%AE%D9%88%D9%84-Tamm-login.jpg" alt="Ø¨ÙˆØ§Ø¨Ø© ØªÙ…" class="partner-img">
                    <img src="https://www.zarkachat.com/wp-content/uploads/2020/04/absherr.jpg" alt="Ø£Ø¨Ø´Ø±" class="partner-img">
                    <img src="https://kss.sa/wp-content/uploads/2022/05/kss-sa-241-450x176.png?v=1652731492" alt="Ù†ÙØ§Ø°" class="partner-img">
                    <img src="https://is1-ssl.mzstatic.com/image/thumb/Purple221/v4/bb/4a/93/bb4a9376-f7fc-8a7a-73f6-8835ee3d8668/AppIcon-0-0-1x_U007emarketing-0-7-0-0-sRGB-0-85-220.png/1200x630wa.png" alt="Ù†Ø¬Ù…" class="partner-img" style="border-radius: 10px;">
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>Ø¹Ù† ÙˆÙØ¬Ù’Ù‡ÙØ©</h3>
                    <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 25px;">Ù…Ù†ØµØ© ÙˆØ·Ù†ÙŠØ© Ù„Ù„Ø§Ø¨ØªÙƒØ§Ø± ÙÙŠ Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¢Ù…Ù†.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h3>Ø±ÙˆØ§Ø¨Ø· Ù‡Ø§Ù…Ø©</h3>
                    <ul><li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li><li><a href="rental-terms.html">Ø§ØªÙØ§Ù‚ÙŠØ© Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø¯Ù…Ø©</a></li></ul>
                </div>
                <div class="footer-col">
                    <h3>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h3>
                    <ul class="footer-contact"><li><i class="fas fa-map-marker-alt"></i> Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ ÙˆØ§Ø¬Ù‡Ø© Ø±ÙˆØ´Ù†</li><li><i class="fas fa-phone"></i> +966 56 546 4718</li></ul>
                </div>
            </div>
            <div class="copyright"><p>Â© 2025 ÙˆÙØ¬Ù’Ù‡ÙØ©. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p></div>
        </div>
    </footer>

    <nav class="bottom-navbar mobile-bottom-navbar">
        <a href="index.html" class="nav-item active"><i class="fas fa-home"></i><span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></a>
        <a href="cars.html" class="nav-item"><i class="fas fa-car"></i><span>Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</span></a>
        <a href="landing.html" class="nav-item guest-only"><i class="fas fa-sign-in-alt"></i><span>Ø¯Ø®ÙˆÙ„</span></a>
        <a href="#" class="nav-item auth-link-bottom"><i class="fas fa-user-circle"></i><span>Ø­Ø³Ø§Ø¨ÙŠ</span></a>
        <a href="qassim-map.html" class="nav-item"><i class="fas fa-map-marked-alt"></i><span>Ø§Ù„Ø®Ø±ÙŠØ·Ø©</span></a>
    </nav>

    <div id="chatbot-popup" class="chatbot-popup">
        <div class="chatbot-header"><h3>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø£Ù…Ù†ÙŠ</h3><button id="chatbot-close-btn" class="close-btn">&times;</button></div>
        <div class="chatbot-body"><div class="bot-message">Ø­ÙŠØ§Ùƒ Ø§Ù„Ù„Ù‡! ÙƒÙŠÙ Ø£Ø³Ø§Ø¹Ø¯ÙƒØŸ</div></div>
        <div class="chatbot-footer"><input type="text" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ..."><button><i class="fas fa-paper-plane"></i></button></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin="anonymous"></script>
    <script>
        AOS.init({ once: true });

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø§Ø±ØªÙƒÙ„Ø²
        particlesJS("particles-js", {
            "particles": {
                "number": { "value": 80, "density": { "enable": true, "value_area": 800 } },
                "color": { "value": "#ffffff" },
                "shape": { "type": "circle" },
                "opacity": { "value": 0.5 },
                "size": { "value": 3 },
                "line_linked": { "enable": true, "distance": 150, "color": "#ffffff", "opacity": 0.4, "width": 1 },
                "move": { "enable": true, "speed": 6 }
            },
            "interactivity": { "detect_on": "canvas", "events": { "onhover": { "enable": true, "mode": "grab" }, "onclick": { "enable": true, "mode": "push" } } },
            "retina_detect": true
        });

        // Ù‡ÙŠØ¯Ø± Ø³ÙƒØ±ÙˆÙ„
        window.addEventListener('scroll', function() {
            var header = document.querySelector('header');
            if(header) { header.classList.toggle('scrolled', window.scrollY > 50); }
        });

        // Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¯Ø®Ù„ (ROI)
        const daysSlider = document.getElementById('days-slider');
        const typeSlider = document.getElementById('type-slider');
        const daysVal = document.getElementById('days-val');
        const typeVal = document.getElementById('car-type-val');
        const totalIncome = document.getElementById('total-income');

        function calculateROI() {
            const days = parseInt(daysSlider.value);
            const type = parseInt(typeSlider.value);
            let dailyRate = 0; let typeName = "";
            if (type === 1) { dailyRate = 150; typeName = "Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©"; }
            else if (type === 2) { dailyRate = 350; typeName = "Ø³ÙŠØ¯Ø§Ù† Ù…ØªÙˆØ³Ø·Ø©"; }
            else { dailyRate = 800; typeName = "ÙØ§Ø±Ù‡Ø© / SUV"; }
            daysVal.innerText = days + " ÙŠÙˆÙ…";
            typeVal.innerText = typeName;
            let total = days * dailyRate;
            totalIncome.innerText = total.toLocaleString();
        }
        daysSlider.addEventListener('input', calculateROI);
        typeSlider.addEventListener('input', calculateROI);

        // Ø§Ù„ØªØ§ÙŠÙ… Ù„Ø§ÙŠÙ†
        window.addEventListener('scroll', () => {
            const items = document.querySelectorAll('.timeline-item');
            items.forEach(item => {
                const rect = item.getBoundingClientRect();
                if (rect.top < window.innerHeight - 100) { item.classList.add('active'); }
            });
        });

        // --- ÙƒÙˆØ¯ Ø§Ù„Ø®Ø±ÙŠØ·Ø© (Leaflet Map Integration) ---
        let map, carMarkersLayer;
        let currentRouteLine = null;
        const targetLocation = [24.8375090, 46.7297325]; // ÙˆØ§Ø¬Ù‡Ø© Ø±ÙˆØ´Ù†

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø©
        const allCars = [
            { id: 'r1', type: 'Ø³ÙŠØ¯Ø§Ù†', model: 'ØªÙˆÙŠÙˆØªØ§ ÙƒØ§Ù…Ø±ÙŠ 2024', price: '120', rating: 4.9, lat: 24.8375090, lng: 46.7297325, scores: { mech: 10, acc: 10, clean: 9 }, img: 'https://tse2.mm.bing.net/th/id/OIP.F3b-M0eckL0XjmywTpu8EgHaFj?rs=1&pid=ImgDetMain&o=7&rm=3' },
            { id: 'r2', type: 'Ø¯ÙØ¹ Ø±Ø¨Ø§Ø¹ÙŠ', model: 'ØªÙˆÙŠÙˆØªØ§ Ù„Ø§Ù†Ø¯ÙƒØ±ÙˆØ²Ø±', price: '450', rating: 5.0, lat: 24.8381000, lng: 46.7292000, scores: { mech: 10, acc: 10, clean: 10 }, img: 'https://www.autopediame.com/userfiles/images/%D9%84%D8%A7%D9%86%D8%AF%D9%83%D8%B1%D9%88%D8%B2%D8%B1/%D8%AA%D9%88%D9%8A%D9%88%D8%AA%D8%A7%20%D9%84%D8%A7%D9%86%D8%AF%D9%83%D8%B1%D9%88%D8%B2%D8%B1%201.jpg' },
            { id: 'r3', type: 'ÙØ§Ø®Ø±Ø©', model: 'Ù…Ø±Ø³ÙŠØ¯Ø³ S500', price: '900', rating: 4.8, lat: 24.8369000, lng: 46.7301000, scores: { mech: 10, acc: 9, clean: 10 }, img: 'https://media.elbalad.news/2024/10/large/995/9/554.jpg' },
            { id: 'r4', type: 'Ø³ÙŠØ¯Ø§Ù†', model: 'Ù‡ÙˆÙ†Ø¯Ø§ÙŠ Ø§Ù„Ù†ØªØ±Ø§', price: '85', rating: 4.2, lat: 24.8378000, lng: 46.7305000, scores: { mech: 8, acc: 7, clean: 8 }, img: 'https://static.sayidaty.net/styles/900_scale/public/2022-03/80578.jpeg.webp' },
            { id: 'r5', type: 'Ø³ÙŠØ¯Ø§Ù†', model: 'ØªÙˆÙŠÙˆØªØ§ ÙƒØ§Ù…Ø±ÙŠ 2023', price: '115', rating: 4.7, lat: 24.8372000, lng: 46.7289000, scores: { mech: 9, acc: 10, clean: 8 }, img: 'https://tse2.mm.bing.net/th/id/OIP.F3b-M0eckL0XjmywTpu8EgHaFj?rs=1&pid=ImgDetMain&o=7&rm=3' },
            { id: 'r6', type: 'Ø¯ÙØ¹ Ø±Ø¨Ø§Ø¹ÙŠ', model: 'Ø´ÙŠÙØ±ÙˆÙ„ÙŠÙ‡ ØªØ§Ù‡Ùˆ', price: '380', rating: 4.9, lat: 24.8365000, lng: 46.7295000, scores: { mech: 10, acc: 10, clean: 9 }, img: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_xL-R8y8f_Q_g_h_j_k_l_m_n_o_p' }
        ];

        function initMap() {
            if (document.getElementById('mapid') && typeof L !== 'undefined') {
                if(map) { map.remove(); }
                map = L.map('mapid').setView(targetLocation, 16);
                L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', { attribution: '&copy; OpenStreetMap &copy; CARTO', maxZoom: 20 }).addTo(map);
                carMarkersLayer = L.layerGroup().addTo(map);
                renderCars();
                setTimeout(() => { map.invalidateSize(); }, 500);
            }
        }

        function createPriceIcon(price, type, extraClass = '') {
            let iconHtml = type === 'ÙØ§Ø®Ø±Ø©' ? '<i class="fas fa-gem" style="color:#f1c40f"></i>' : (type === 'Ø¯ÙØ¹ Ø±Ø¨Ø§Ø¹ÙŠ' ? '<i class="fas fa-truck-pickup" style="color:#e67e22"></i>' : '<i class="fas fa-car" style="color:var(--brand-dark-teal)"></i>');
            return L.divIcon({
                className: 'custom-div-icon',
                html: `<div class="price-marker-box ${extraClass}">${iconHtml} ${price} ï·¼</div>`,
                iconSize: [80, 30], iconAnchor: [40, 35], popupAnchor: [0, -35]
            });
        }

        function getProgressBar(score) {
            let colorClass = score < 5 ? 'bg-danger' : (score < 7 ? 'bg-warning' : 'bg-success');
            return `<div class="progress-track"><div class="progress-fill ${colorClass}" style="width: ${score * 10}%"></div></div>`;
        }

        let currentType = 'Ø§Ù„ÙƒÙ„';
        let maxPrice = 1000;

        window.updatePriceLabel = function(val) { maxPrice = parseInt(val); document.getElementById('priceValue').innerText = val; }
        window.filterMap = function(type, element) {
            currentType = type;
            document.querySelectorAll('.tf-pill').forEach(btn => btn.classList.remove('active'));
            if(element) element.classList.add('active');
            renderCars();
        }

        function renderCars() {
            if(!map || !carMarkersLayer) return;
            carMarkersLayer.clearLayers();
            if(currentRouteLine) map.removeLayer(currentRouteLine);

            const filtered = allCars.filter(car => (currentType === 'Ø§Ù„ÙƒÙ„' || car.type === currentType) && parseInt(car.price) <= maxPrice);

            filtered.forEach(car => {
                const marker = L.marker([car.lat, car.lng], { icon: createPriceIcon(car.price, car.type, car.rating >= 5 ? 'premium-marker' : '') }).addTo(carMarkersLayer);
                
                marker.on('click', function() {
                    if(currentRouteLine) map.removeLayer(currentRouteLine);
                    currentRouteLine = L.polyline([targetLocation, [car.lat, car.lng]], { color: '#c5a065', weight: 4, dashArray: '10, 10' }).addTo(map);
                    map.fitBounds(currentRouteLine.getBounds(), { padding: [50, 50] });
                });

                const popupContent = `
                    <div class="popup-car-card">
                        <img src="${car.img}" class="popup-img">
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <h4 style="margin:0; color:#0f2925;">${car.model}</h4>
                            <span style="font-size:0.8rem; color:#f1c40f;"><i class="fas fa-star"></i> ${car.rating}</span>
                        </div>
                        <div class="rating-bars-container">
                            <div class="rating-row"><span>Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒØ§</span>${getProgressBar(car.scores.mech)}</div>
                            <div class="rating-row"><span>Ø§Ù„Ù†Ø¸Ø§ÙØ©</span>${getProgressBar(car.scores.clean)}</div>
                        </div>
                        <a href="cars.html?carId=${car.id}" class="tf-btn" style="text-decoration:none; width:100%; display:block; text-align:center;">Ø­Ø¬Ø² Ø¨Ù€ ${car.price} Ø±ÙŠØ§Ù„</a>
                    </div>
                `;
                marker.bindPopup(popupContent);
            });
        }

        window.simulateSmartLocate = function() {
            const btn = document.getElementById('smart-locate-btn');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ...';
            setTimeout(() => { map.flyTo(targetLocation, 17); btn.innerHTML = '<i class="fas fa-check"></i> Ø£Ù†Øª Ù‡Ù†Ø§'; setTimeout(() => btn.innerHTML = '<i class="fas fa-crosshairs"></i> Ø§Ù„Ø£Ù‚Ø±Ø¨ Ù„ÙŠ', 2000); }, 1000);
        }

        setTimeout(() => { if(typeof L !== 'undefined') initMap(); }, 500);
    </script>
    <script src="csr-content.js"></script>
    <script src="script.js"></script>
    <script src="chatbot.js"></script>
</body>
</html>
